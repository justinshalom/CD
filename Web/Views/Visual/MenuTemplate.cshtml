@using Web.Controllers.Json
@model Web.Models.DatabaseConnectionModel
@{
    Layout = null;
}


@functions {

    string cdRootpath = "http://localhost:2525/";
    string cdLinks = "";
    string cdScripts = "";

    void require(string category, string name = null)
    {
        string cdScriptpath = cdRootpath + "Scripts/";

        if (name != null)
        {
            category = category + "/" + name;
        }
        cdScripts += "<script src='" + cdScriptpath + category + ".js' type='text/javascript'  ></script>";

    }

    void include(string category, string name = null)
    {
        string cdStylepath = cdRootpath + "Content/";
        if (name != null)
        {
            category = category + "/" + name;
        }
        cdLinks += "<link href='" + cdStylepath + category + ".css' rel='stylesheet' type='text/css' />";
    }

    private string BindCheckbox(string name, string key, string classname,string label, string boxchecked="")
    {
        var html= "<div class='hdcol-xs-50 hd_menubox' id='hd_" + key + "_box'>";
        html+= "<div class='hdcol-xs-50'>";
        html += "<div class='hdform-group hdform-group-sm'>";
        html += "<div class='togglebutton'>";
        html += "<label>";
        html += Html.Hidden(name, new { id = "hd_" + key, value = boxchecked });
        if (boxchecked=="True")
        {
            html += Html.CheckBox(name + "_check", new {id = "hd_" + key + "_check", @class = classname,@checked=true});
        }
        else
        {
            html += Html.CheckBox(name + "_check", new {id = "hd_" + key + "_check", @class = classname});
        }
        html += "<span>"+ label + "</span>";
        html += "</label>";
        html += "</div>";
        html += "</div>";
        html += "</div>";
        html += "</div>";
        return html;
    }
    private string BindDropDown(string name, string key, string optionattribute, string optionvalue, string label, string jsonaction, string jsoncontroller)
    {
        var html = "<div class='hdcol-xs-50 hd_menubox' id='hd_" + key + "_box'>";
        html += "<div class='hdcol-xs-50'>";
        html += "<div class='hdform-group hdform-group-sm'>";
        html += "<label class='control-label pull-left' >" + label + "</label>";
        html += "<select";
        html += "id='hd_" + key + "' name='" + name + "' ";
        html += "data-json='"+(cdRootpath+Url.Action(jsonaction, jsoncontroller))+"' ";
        html += "class='hdform-control selectize  input-sm' ";
        html += "placeholder='" + label + "'";
        html += ">";
        html += "<option data-follow='true' data-key='" + optionattribute + "'>'" + optionvalue + "'</option>";
        html += "</select>";
        html += "</div>";
        html += "</div>";
        html += "</div>";
        return html;
    }
        }
@{


    if (!ViewBag.isjquery)
    {
        require("jquery-3.1.1.min");
    }

    require("internal", "utilities");

    require("moment", "moment.min");
    require("material", "arrive.min");
    require("material", "ripples.min");
    require("material", "material.min");
    require("material-datepicker", "js/bootstrap-material-datetimepicker");
    //require("chosen", "chosen.jquery.min");
    require("colorpicker", "js/bootstrap-colorpicker.min");
    require("selectize", "standalone/selectize.min");
    //require("internal", "htmldesignerhtml");
    require("internal", "htmldesignerststaticfn");
    require("internal", "htmldesignerstdynfn");




    if (ViewBag.editormode == "design")
    {
        require("internal", "htmldesignerfunctions");
        require("internal", "htmldesignerstajaxfn");
        require("internal", "bindlist");
        //require("internal", "htmldesignerhtml");
        require("internal", "htmldesignerobj");

        require("internal", "htmldesignerevents");

        require("internal", "htmldesigner");
    }

    if (ViewBag.editormode == "db")
    {
        require("jlbinder");
        require("internal", "codeeditorbackupdata");
        require("internal", "codeeditormenumanager");
        require("internal", "codeeditor");
    }
    //if (!ViewBag.isbootstrap)
    //{
    //    require("bootstrap.min");
    //}
    include("awe", "css/font-awesome.min");
    //include("bootstrap","bootstrap.min");
    include("colorpicker", "css/bootstrap-colorpicker.min");
    include("material", "bootstrap-material-design.min");
    include("material", "ripples.min");
    include("material-datepicker", "css/bootstrap-material-datetimepicker");
    //include("chosen", "chosen.min");
    include("selectize", "css/selectize");
    include("hd_styles");
    include("hdcustomstyles");

}






    @Html.Raw(cdScripts)

    @Html.Raw(cdLinks)


    @*<div id="absolutestyleeditor">
        <div class="hdpanel-group" id="accordion" role="tablist" aria-multiselectable="true" style="margin-bottom: 0px;">
            <div class="hdpanel hdpanel-success">
                <div class="hdpanel-heading" style="padding: 4px;">
                    <h6 class="hdpanel-title">
                        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseStyle" aria-expanded="true" aria-controls="collapseStyle">Style Editor</a>
                    </h6>
                </div>
                <div id="collapseStyle" class="hdpanel-collapse collapse in" role="tabhdpanel" aria-labelledby="headingOne">
                    <div class="hdpanel-body">
                        <div class="hdpanel-group" id="hdstylemenu" role="tablist" aria-multiselectable="false"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>*@

<div id="hd_rightmenu" class="hd_rightmenu" >
    <div class="hdcol-xs-50">
        <div class="hdpanel hdpanel-info hdcol-xs-50 hdpanelheading">
            <div class="hdpanel-heading hdcol-xs-50" id="hd_rightmenu_header">
                <h3 class="hdpanel-title">Database <span ></span></h3>
            </div>
            <div class="hdpanel-body open hdcol-xs-50" id="hd_rightmenu_body" style="">
                <div class="hdcol-xs-50" id="hd_rightmenu_allattributes" style="">
                    @Html.Raw(BindDropDown("Server","servernames", "ServerName", "localhost", "Server Name", "GetAllServerNames", "DbApi"))
                    @Html.Raw(BindDropDown("Authentication", "authentications", "authentication", "SQL Password", "Authentication", "GetAllServerNames", "DbApi"))
                    
                    <div class="hdcol-xs-50 hd_menubox" id="hd_usernames_box">
                        <div class="hdcol-xs-50">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">User Name</label>
                                <select id="hd_usernames" class="hdform-control selectize  input-sm" placeholder="User names">
                                    <option data-static="true"></option>
                                    <option data-static="true">sa</option>
                                    <option data-follow="true" data-key="username">admin</option>
                                </select>
                            </div>

                        </div>

                    </div>
                    <div class="hdcol-xs-50 hd_menubox" id="hd_passwords_box">
                        <div class="hdcol-xs-50">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">password</label>
                                <select id="hd_passwords" class="hdform-control selectize  input-sm" placeholder="Passwords">
                                    <option data-static="true"></option>
                                    <option data-follow="true" data-key="password">password</option>

                                </select>
                            </div>

                        </div>

                    </div>

                    <div class="hdcol-xs-50 hd_menubox" id="hd_dbnames_box">
                        <div class="hdcol-xs-50">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">Database</label>
                                <select
                                    id="hd_dbnames"
                                    data-json="@(cdRootpath + Url.Action("GetAllDatabases", "DbApi"))"
                                    class="hdform-control selectize  input-sm"
                                    placeholder="Databases">
                                    <option data-static="true"></option>
                                    <option data-follow="true" data-key="database_name">master</option>
                                </select>
                            </div>

                        </div>

                    </div>
                    @Html.Raw(BindCheckbox("IntegratedSecurity", "integratedsecurity", "TrueFalse", "Integrated Security"))
                    @Html.Raw(BindCheckbox("Encrypt", "encrypt", "TrueFalse", "Encrypt"))
                    @Html.Raw(BindCheckbox("TrustServerCertificate", "trustservercertificate", "TrueFalse", "Trust Server Certificate", "True"))
                    @Html.Raw(BindCheckbox("EncryptConnection", "encryptconnection", "TrueFalse", "Encrypt Connection"))
                    @Html.Raw(BindCheckbox("MultipleActiveResultSets", "multipleactiveresultsets", "TrueFalse", "Multiple Active Result Sets"))
                    @*@Html.Raw(BindCheckbox("PersistSecurityInfo", "persistsecurityinfo", "TrueFalse", "Persist Security Info"))*@
                    @*@Html.Raw(BindCheckbox("MultiSubNetFailOver", "multisubnetfailover", "TrueFalse", "MultiSubNetFailOver"))*@


                    @*<div class="hdcol-xs-50 hd_menubox">
                        <div class="hdcol-xs-50 ">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">New Attribute</label>
                                <input type="text" class="hdform-control input-sm " placeholder="Key" id="hd_rightmenu_attr_name" />
                                <input type="text" class="hdform-control input-sm " placeholder="Value" id="hd_rightmenu_attr_value" />
                            </div>
                        </div>

                    </div>
                    <div class="hdcol-xs-50 hd_menubox">
                        <a href="javascript:void(0)"> Style </a>
                        <div id="hd_rightmenu_styles" class="hd_rightmenu_clear  hdcol-xs-50 "></div>
                    </div>*@
                </div>
            </div>
        </div>
    </div>
    <datalist id="hd_stylelist"></datalist>
</div>
<div id="hd_rightmenu_tablemanage" class="hd_rightmenu" >
    <div class="hdcol-xs-50">
        <div class="hdpanel hdpanel-info hdcol-xs-50 hdpanelheading">
            <div class="hdpanel-heading hdcol-xs-50" id="hd_rightmenu_tablemanage_header">
                <h3 class="hdpanel-title">Table <span ></span></h3>
            </div>
            <div class="hdpanel-body open hdcol-xs-50" id="hd_rightmenu_tablemanage_body" style="">
                <div class="hdcol-xs-50" id="hd_rightmenu_tablemanage_allattributes" style="">
                    <div class="hdcol-xs-50 hd_menubox" id="hd_tables_box">
                        <div class="hdcol-xs-50">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">Table</label>
                                <select id="hd_tables" class="hdform-control selectize  input-sm" placeholder="Tables">
                                    <option data-static="true"></option>
                                    <option data-follow="true" data-key="name">Users</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="hdcol-xs-50 hd_menubox" id="hd_datalisttypes_box">
                        <div class="hdcol-xs-50">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">Data List Type</label>
                                <select id="hd_datalisttypes" class="hdform-control selectize  input-sm" placeholder="DataListType">
                                    <option data-static="true"></option>
                                    <option data-follow="true" data-key="datatype">Rows</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="hdcol-xs-50 hd_menubox" id="hd_tablecolumns_box">
                        <div class="hdcol-xs-50">
                            <div class="hdform-group hdform-group-sm">
                                <label class="control-label pull-left">Table Columns</label>
                                <select id="hd_tablecolumns" class="hdform-control selectize  input-sm" placeholder="Table Coumns">
                                    <option data-static="true"></option>
                                    <option data-follow="true" data-key="name">Users</option>
                                </select>
                            </div>
                        </div>
                    </div>
                  
                   
                </div>
            </div>
        </div>
    </div>

</div>
   


